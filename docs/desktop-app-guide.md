# Claude Remote 桌面应用使用指南

## 简介

Claude Remote 是一款桌面应用，让你可以通过手机浏览器远程控制电脑上的 Claude CLI。只需在同一 WiFi 网络下，用手机扫码或输入配对码，即可随时随地与 Claude 对话。

---

## 快速开始

### 1. 启动应用

**Mac 用户：**
```bash
# 方式一：直接打开编译好的 App
open /Users/aptxzwei/Desktop/cli-remote/packages/desktop-app/release/mac-arm64/Claude\ Remote.app

# 方式二：从源码运行（开发模式）
cd /Users/aptxzwei/Desktop/cli-remote/packages/desktop-app
npm run dev
```

### 2. 配置目录权限

启动后会看到设置界面：

1. 点击 **"Add Directories"** 按钮
2. 选择允许 Claude 访问的工作目录（如项目文件夹）
3. 可添加多个目录
4. 点击 **"Start Server"** 启动服务

> 如果不选择目录，默认允许访问 `/Users` 目录

### 3. 手机连接

服务启动后，桌面端会显示：

- **访问地址**：`http://192.168.x.x:4000`（你的局域网 IP）
- **配对码**：4 位字母数字

**在手机上：**

1. 确保手机与电脑在**同一 WiFi** 网络
2. 用浏览器打开显示的 URL
3. 输入 4 位配对码
4. 点击 **"建立连接"**

### 4. 开始对话

连接成功后，即可：

- 创建多个会话（点击右下角 + 按钮）
- 切换不同会话
- 发送消息与 Claude 对话
- 查看 Claude 的实时回复

---

## 界面说明

### 桌面端

| 屏幕 | 说明 |
|------|------|
| 设置页 | 配置允许访问的目录，启动服务 |
| 配对页 | 显示手机访问地址和配对码 |
| 已连接页 | 显示活跃会话列表和消息日志 |

### 手机端（微信风格 UI）

| 屏幕 | 说明 |
|------|------|
| 配对页 | 输入配对码建立连接 |
| 会话列表 | 类似微信的会话列表，显示所有 Claude 会话 |
| 聊天页 | 与 Claude 对话的界面 |

**手机端手势：**
- 左滑返回会话列表
- 长按会话可删除

---

## 常见问题

### Q: 手机无法连接？

1. 确认手机和电脑在同一 WiFi
2. 检查电脑防火墙是否放行 4000 端口
3. 尝试关闭 VPN

### Q: 配对码过期了？

点击桌面端 **"Stop Server"** 后重新启动，会生成新的配对码。

### Q: 如何断开连接？

- 手机端：点击右上角断开按钮
- 桌面端：点击 **"Disconnect"** 或关闭应用

### Q: 支持哪些平台？

| 平台 | 状态 |
|------|------|
| macOS (Apple Silicon) | ✅ 已测试 |
| macOS (Intel) | ⚠️ 需重新编译 |
| Windows | ⚠️ 需运行 `npm run package:win` |
| Linux | ⚠️ 需运行 `npm run package:linux` |

---

## 构建命令

```bash
cd /Users/aptxzwei/Desktop/cli-remote/packages/desktop-app

# 安装依赖
npm install

# 开发模式运行
npm run dev

# 构建各平台安装包
npm run package:mac    # macOS
npm run package:win    # Windows
npm run package:linux  # Linux
```

---

## 技术架构

```
┌─────────────────────────────────────────────────┐
│                  桌面应用 (Electron)              │
│  ┌──────────────┐  ┌──────────────────────────┐  │
│  │ 嵌入式服务器  │  │     Claude Service       │  │
│  │  (HTTP/WS)   │──│  (管理 Claude CLI 进程)   │  │
│  └──────────────┘  └──────────────────────────┘  │
│         ▲                                        │
└─────────│────────────────────────────────────────┘
          │ WebSocket
          ▼
┌─────────────────────────────────────────────────┐
│              手机浏览器 (mobile.html)            │
│  ┌──────────────────────────────────────────┐   │
│  │         微信风格聊天界面                   │   │
│  │    - 会话列表 - 聊天界面 - 多会话支持       │   │
│  └──────────────────────────────────────────┘   │
└─────────────────────────────────────────────────┘
```

---

## 端口说明

| 端口 | 用途 |
|------|------|
| 4000 | HTTP 服务 + WebSocket 连接 |

---

## 安全提示

- 配对码为一次性使用，配对成功后失效
- 仅限局域网访问，不暴露到公网
- 建议只授权必要的工作目录
